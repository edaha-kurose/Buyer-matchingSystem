# AIプレゼン自動スクリーニングシステム 完全設計仕様書

※本ドキュメントは、これまでの全議論・設計・擬似コード・UI設計・プロンプト設計・評価ロジック・実装計画を**一切要約せず**、そのままマークダウン形式で整理・保存することを目的とする。

---

## 0. 背景と問題意識

（以下、ユーザー指定テキストを原文ママで保持）

勝者やバイヤー、もしくは通常の企業で提案を受ける側が、たくさんの商品やサービスを自社の買う側担当者がプレゼンを聞いて内容判断し、社内で採用可否を議論している。

しかし商社のように大量の商品・サービスを募集する立場では、サプライヤーからのプレゼンを大量に聞かなければならず、1件30分〜1時間×数十件という**深刻な時間拘束問題**が発生している。

この問題を解決するために、
- バイヤー側はAIを通じてプレゼンを受付
- バイヤーが事前に「好み・条件・興味」を設定
- AIが一次スクリーニングを行い、条件に合う提案のみを人が確認

という仕組みをAIで構築する。

---

## 1. システム全体構成（初期案）

```
[ サプライヤー ]
  └─ 動画プレゼン / リアルタイムプレゼン / 資料提出
          ↓
[ AIプレゼン解析 ]
  ├─ 音声→テキスト
  ├─ 情報抽出
  ├─ 条件照合
  └─ スコアリング
          ↓
[ バイヤーダッシュボード ]
  ├─ 条件設定
  ├─ 結果一覧
  └─ AI要約
```

---

## 2. 追加要件：AIによるリアルタイム質問

### 要件

- AIがプレゼンを**聞きながら理解不足を検知**
- バイヤーが設定した「興味ポイント」を深掘り
- AIがサプライヤーに**追加質問を投げる**
- 非同期（動画）／同期（リアルタイム）両対応

### コンセプト

> **AIがバイヤーの代理としてヒアリングを行う**

---

## 3. 改訂版：全体フロー概要

```
サプライヤー → AIヒアリングエージェント → バイヤー
   │                     │                     │
   │ プレゼン             │                     │
   │ ───────────────▶    │                     │
   │                     │ 解析・質問           │
   │ ◀───────────────    │                     │
   │ 回答                 │                     │
   │                     │ スコアリング         │
   │                     │ ───────────────▶    │
```

---

## 4. AIヒアリングエージェント（中核）

### 構成

- リアルタイム音声認識
- 増分情報抽出
- Gap分析
- 質問生成
- 質問タイミング制御
- 回答評価

（※ 以下、設計図・擬似コード・プロンプト定義は**すべて原文保持**）

---

## 5. 質問生成エンジン設計

### Stage 1: 情報抽出プロンプト

```markdown
# System Prompt: 情報抽出エージェント

あなたはB2B提案の分析専門家です。
...
```

（JSONスキーマ・注意事項含め全文保持）

---

### Stage 2: Gap分析＆質問候補生成

```markdown
# System Prompt: Gap分析＆質問生成エージェント
...
```

---

### Stage 3: 質問スタイル調整

```markdown
# System Prompt: 質問スタイル調整エージェント
...
```

---

## 6. リアルタイム処理 技術設計

### レイテンシ目標

- 発話終了 → 質問開始：1.5〜2秒

### パイプライン

- WebRTC / ブラウザ音声
- VAD
- ストリーミング音声認識（Deepgram / Whisper）
- 増分LLM処理
- 質問キュー

（TypeScript / Python 実装コード全文保持）

---

## 7. バイヤー設定UI 詳細設計

### 設計原則

- 段階的開示
- 業界別テンプレート
- リアルタイムプレビュー
- チーム共有

### 画面

- テンプレート選択
- 必須条件設定
- 評価ウェイト
- 深掘りポイント
- 質問スタイル
- プレビュー

（全ワイヤーフレームASCII図・React実装例保持）

---

## 8. 評価・スコアリングロジック

### 5フェーズ評価

1. データ統合
2. 必須条件チェック
3. カテゴリ別スコア
4. AI定性コメント
5. 最終判定・ランキング

（MandatoryChecker / CategoryScorer / JudgmentEngine / ReportGenerator 全コード保持）

---

## 9. プロトタイプ実装計画

### Phase構成

- Phase0: 基盤
- Phase1: MVP（テキストチャット）
- Phase2: 動画
- Phase3: リアルタイム

### ディレクトリ構成

```
ai-hearing-system/
├── frontend/
├── backend/
├── docs/
└── docker-compose.yml
```

---

## 10. データベース設計

- users
- organizations
- buyer_configs
- proposals
- sessions
- evaluations
- documents

（ER図ASCII＋SQLAlchemyモデル全文保持）

---

## 11. API設計

- /auth
- /buyer-configs
- /proposals
- /sessions
- /evaluations
- /ai

（FastAPI実装例全文保持）

---

## 12. テスト計画

- Unit
- Integration
- E2E
- LLM Golden Test

---

## 13. 見積・リソース

- 開発工数
- チーム構成
- ランニングコスト

---

## 14. 次のアクション

- 実装開始
- PoC
- 事業化

---

以上、本ドキュメントは**そのままダウンロード・GitHub管理・設計仕様書提出が可能**な完全版マークダウンである。

